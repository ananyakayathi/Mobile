<!doctype html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PHJGLX3W');</script>
<!-- End Google Tag Manager -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Checkout — PixelMobile</title>
<style>
  :root{
    --bg:#081223;--card:#071220;--accent:#06b6d4;--muted:#9fb4c7;--radius:14px;
    font-family: Inter, system-ui, -apple-system, Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{
    margin:0;padding:18px;background:linear-gradient(180deg,#031225,#071a2b);color:#e7f3fb;
    min-height:100vh;display:flex;justify-content:center;
  }
  .wrap{width:100%;max-width:420px}
  header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
  .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700;color:#021124}
  h1{margin:0;font-size:18px}
  p.lead{margin:6px 0 12px;color:var(--muted);font-size:13px}

  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:14px;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
  .product{
    display:flex;gap:12px;align-items:center;margin-bottom:12px;
  }
  .product img{width:84px;height:84px;border-radius:8px;object-fit:cover}
  .pmeta{flex:1}
  .pmeta h3{margin:0;font-size:15px}
  .pmeta p{margin:6px 0 0;color:var(--muted);font-size:13px}

  form{display:flex;flex-direction:column;gap:10px;margin-top:10px}
  label{font-size:13px;color:var(--muted)}
  input[type="text"], input[type="email"]{
    padding:10px;border-radius:10px;border:0;background:rgba(255,255,255,0.03);color:inherit;
    outline: none;box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
  }
  .btn{
    border:0;padding:12px;border-radius:12px;font-weight:700;background:linear-gradient(90deg,var(--accent),#7c3aed);color:#021124;cursor:pointer;margin-top:6px;
  }
  .btn:active{transform:scale(.997)}
  .small{font-size:13px;color:var(--muted);text-align:center;margin-top:10px}

  .back{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px;border-radius:10px;cursor:pointer}

  @media(min-width:600px){
    body{padding:28px}
    .wrap{box-shadow:0 20px 60px rgba(2,6,23,0.75);border-radius:18px;padding:18px}
  }
</style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PHJGLX3W"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div class="wrap" role="main">
  <header>
    <div class="logo">PM</div>
    <div>
      <h1>Checkout</h1>
      <p class="lead">Fill your details to reserve the mobile</p>
    </div>
  </header>

  <div class="card" id="cartCard">
    <div id="placeholder" style="display:none">No mobile selected — please go back to shop.</div>
    <div class="product" id="productBlock" style="display:none">
      <img id="pimg" src="" alt="Selected mobile">
      <div class="pmeta">
        <h3 id="pname"></h3>
        <p id="pdesc"></p>
        <strong id="pprice" style="display:block;margin-top:8px;color:var(--accent)"></strong>
      </div>
    </div>

    <form id="checkoutForm" style="display:none" onsubmit="event.preventDefault(); proceed()">
      <div>
        <label for="fullname">Full Name</label>
        <input id="fullname" type="text" required placeholder="Your full name">
      </div>
      <div>
        <label for="email">Email address</label>
        <input id="email" type="email" required placeholder="you@example.com">
      </div>

      <button class="btn" type="submit">Proceed to Payment</button>
      <button type="button" class="back" onclick="goBack()" style="width:100%;margin-top:8px">Back to shop</button>
    </form>

    <p class="small">We will only use your email to send the booking confirmation. This is a demo checkout.</p>
  </div>
</div>

<script>
  // load selected mobile
  const productBlock = document.getElementById('productBlock');
  const placeholder = document.getElementById('placeholder');
  const formEl = document.getElementById('checkoutForm');

  function loadSelected(){
    const raw = localStorage.getItem('selectedMobile');
    if(!raw){
      placeholder.style.display='block';
      productBlock.style.display='none';
      formEl.style.display='none';
      return;
    }
    const p = JSON.parse(raw);
    productBlock.style.display = 'flex';
    formEl.style.display = 'flex';
    placeholder.style.display = 'none';
    document.getElementById('pimg').src = p.img;
    document.getElementById('pname').textContent = p.name;
    document.getElementById('pdesc').textContent = p.desc;
    document.getElementById('pprice').textContent = '₹' + p.price.toLocaleString('en-IN');

    // if user had partially filled form previously, autofill
    const storedForm = localStorage.getItem('checkoutForm');
    if(storedForm){
      try{
        const f = JSON.parse(storedForm);
        if(f.name) document.getElementById('fullname').value = f.name;
        if(f.email) document.getElementById('email').value = f.email;
      }catch(e){}
    }
  }

  function proceed(){
    // save form to localStorage and go to payment
    const name = document.getElementById('fullname').value.trim();
    const email = document.getElementById('email').value.trim();
    if(!name || !email){ alert('Please complete your details.'); return; }
    const payload = {name,email,ts:Date.now()};
    localStorage.setItem('checkoutForm', JSON.stringify(payload));
    location.href = 'payment.html';
  }

  function goBack(){ location.href = 'index.html'; }

  // initialize
  loadSelected();
</script>
</body>
</html>
